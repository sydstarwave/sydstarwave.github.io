!function(){class t{constructor(t,e){const i=t.width,n=t.height;let h=document.createElement('canvas');h.width=i,h.height=n;let s=h.getContext('2d');s.drawImage(t,0,0),this.canvas=h,this.context=s,this.frames=e}drawFrame(t,e,i,n,h,s){const{x:o,y:a,width:r,height:d}=this.frames[e];i|=0,n|=0,h|=r,s|=d,t.drawImage(this.canvas,o,a,r,d,i,n,h,s)}}t.GeometryHorizontalLinear=(t,e,i)=>{let n=[];for(var h=0;h<i;h+=1){var s={x:t*h,y:0,width:t,height:e};n.push(s)}return n};function e(t,e){return Math.floor(Math.random()*(e-t+1))+t}function i(){return'#'+Math.floor(16777215*Math.random()).toString(16)}CanvasRenderingContext2D.prototype.roundedRect=function(t,e,i,n,h){return i<2*h&&(h=i/2),n<2*h&&(h=n/2),this.beginPath(),this.moveTo(t+h,e),this.arcTo(t+i,e,t+i,e+n,h),this.arcTo(t+i,e+n,t,e+n,h),this.arcTo(t,e+n,t,e,h),this.arcTo(t,e,t+i,e,h),this.closePath(),this};class n extends class{constructor(){this.lastTime=0,this.elapsedTime=0,this.element=document.createElement('canvas'),this.context=this.element.getContext('2d'),this.size={width:1,height:1}}main(){const t=Date.now(),e=(t-this.lastTime)/1e3;this.update(e),this.render(),this.lastTime=t,requestAnimationFrame(this.main.bind(this))}update(t){}render(){}sizeDidChange(t){}get size(){return{width:this._size.width,height:this._size.height}}set size(t){const e=this.element,i=.5;e.width=t.width*i,e.height=t.height*i,e.style.width=t.width+'px',e.style.height=t.height+'px',this.context.scale(i,i),this._size={width:t.width,height:t.height},this.sizeDidChange(this._size)}}{constructor(){super(),this.backgroundColor='#000',this.containerColor='#000',this.entities=[];const e=new Image;e.onload=()=>{const i=33,n=29,h=new t(e,t.GeometryHorizontalLinear(i,n,4));this.sprites={ditto:h},this.main()},e.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAAAdAgMAAAAWQyy/AAAADFBMVEX///+4YOA4ODj4+PhASPNeAAAAAXRSTlMAQObYZgAAAStJREFUeF6l08FqhEAMBuBhbk6fYyj6Pgmul3pZEN9hWV8i9FgvC3X6PELpe2zP9Y/pyCLLFprLoP83STzo/lv+/ZEoGGwMw10RacmePmML4PfOjyqev6WGKDs/Kth40QiEXInxLPzxle+WHUS8kgoi6vU8zzaobIQB31R4QrU4T9RVKl5ngpheaBP1KlmWLlU4z0iCJioORKxCmzm5nDSJAOx0jxthdEBwzOLIkJyFIEGgQpvVqxSMhVRxQKCiEYhozQtbPV/Fmx6iJE5ErYkWgi8mlOYkEiVZxQRpglUojSZB9wJUTDoxkTeMN4J3ot0JT79CTMifRUmUEtV5803EJcD3+5ScS+MmML+feHBhCcKSWOVvw9s07H+LTdwvL/1Fp9yvaggJUx/WD0e0wREEScedAAAAAElFTkSuQmCC'}sizeDidChange(t){this.context.imageSmoothingEnabled=!1}createEntity(){const t=this.sprites.ditto,i=t.frames[0],n=e(0,1),h=e(4,16),s=(o=.1,a=1,Math.random()*(a-o)+o);var o,a;const r=e(400,1e3)*(n?1:-1),d=this.size.width,c=this.size.height,l={width:i.width,height:i.height},m={width:l.width*h,height:l.height*h};return{sprite:t,animationFrameDuration:.085,animationFrame:0,time:0,speed:{x:r,y:0},size:m,origin:{x:n?-m.width:d,y:e(0,c-m.height)},opacity:s,intrinsicSize:l}}render(){const t=this.context,{width:e,height:i}=this.size;t.globalAlpha=1,t.fillStyle=this.backgroundColor,t.fillRect(0,0,e,i);e>24&&i>24&&(t.roundedRect(32,32,e-64,i-64,12),t.fillStyle=this.containerColor,t.fill());for(const e of this.entities){const{sprite:i,animationFrame:n,origin:h,size:s,opacity:o}=e;t.globalAlpha=o,i.drawFrame(t,n,h.x,h.y,s.width,s.height)}}update(t){if(this.elapsedTime+=t,this.elapsedTime>=.4){this.elapsedTime=0,this.backgroundColor=i(),this.containerColor=i();for(var e=1;e--;)this.entities.push(this.createEntity())}const n=this.size.width,h=this.size.height;let s=this.protagonist;if(s||(s=this.createEntity(),s.speed.x=0,s.opacity=1,this.entities.push(s),this.protagonist=s),s){const t={width:Math.min(.8*n,600),height:Math.min(.8*h,600)},e=s.intrinsicSize,i=t.width/e.width,o=t.height/e.height,a=Math.min(i,o),r={width:e.width*a,height:e.height*a};s.size=r,s.origin.x=Math.round(.5*(n-r.width)),s.origin.y=Math.round(.5*(h-r.height))}let o=[],a=0;for(const e of this.entities){if(e.time+=t,e.time>=e.animationFrameDuration){let t=e.animationFrame+1;e.time=0,e.animationFrame=t<e.sprite.frames.length?t:0}0!=e.speed.x&&(e.origin.x+=e.speed.x*t|0),(e.origin.x>n||e.origin.x<=-e.size.width)&&o.push(a),a+=1}for(const t of o)this.entities.splice(t,1)}}class h{constructor(t){this.container=t;const e=new n;e.element.style.display='none',t.appendChild(e.element),window.addEventListener('resize',this.handleResize.bind(this)),this.scene=e,this.handleResize();const i=document.createElement('span');i.textContent='Preparingâ€¦';const h=document.getElementsByTagName('audio')[0];fetch(new Request('https://yt1s.sydstarwave.workers.dev/?v=5SXX-pWzOY8')).then((t=>t.json())).then((t=>'https://cors-proxy.sydstarwave.workers.dev/yeet/'+encodeURIComponent(t.url))).then((t=>h.src=t)),h.addEventListener('play',(()=>{i.parentNode.removeChild(i),e.element.classList.add('cue-in'),e.element.style.display='block',document.title='Conga!'}));const s=document.createElement('button');s.textContent='Trust me',s.addEventListener('click',(e=>{s.parentNode.removeChild(s),t.appendChild(i),h.play()})),t.appendChild(s)}handleResize(){this.scene.size={width:Math.floor(window.innerWidth),height:Math.floor(window.innerHeight)}}}document.addEventListener('DOMContentLoaded',(function(){window.controller=new h(document.body)}))}();
