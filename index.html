<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Sydney - @sydstarwave</title>
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="sydstarwave's quick access links">
    <meta name="image" content="https://sydstarwave.github.io/images/screenshot.jpg">
    <meta itemprop="name" content="Sydney - @sydstarwave">
    <meta itemprop="description" content="sydstarwave's quick access links">
    <meta itemprop="image" content="https://sydstarwave.github.io/images/screenshot.jpg">
    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://sydstarwave.github.io/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Where in the 'verse is @sydstarwave?">
    <meta property="og:description" content="Here you can find Sydstarwave's official links to Twitch, Youtube, Twitter, Facebook, and Instagram! Everything is all in one place for convenience :)">
    <meta property="og:image" content="https://sydstarwave.github.io/images/screenshot.jpg">
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="sydstarwave.github.io">
    <meta property="twitter:url" content="https://sydstarwave.github.io/">
    <meta name="twitter:title" content="Where in the 'verse is @sydstarwave?">
    <meta name="twitter:description" content="Here you can find Sydstarwave's official links to Twitch, Youtube, Twitter, Facebook, and Instagram! Everything is all in one place for convenience :)">
    <meta name="twitter:image" content="https://sydstarwave.github.io/images/screenshot.jpg">
  </head>
  <body>
    <video autoplay muted loop>
      <source src="https://sydstarwave.github.io/images/bg.webm" type="video/webm">
    </video>
    <main>
      <img src="/images/profile-image.png" alt="Sydstarwave's Profile Pic" />
      <h1>Sydney - @sydstarwave</h1>
      <div class="links-sec">
        <a href="https://twitch.tv/sydstarwave" target="_blank">
          <div class="link">
            <span><i class="fab fa-twitch"></i>Twitch</span>
          </div>
        </a>
        <a href="https://www.youtube.com/channel/UCfoWkg3_HFheoPl--HIeKGw" target="_blank">
          <div class="link">
            <span><i class="fab fa-youtube"></i>Youtube</span>
          </div>
        </a>
        <a href="https://steamcommunity.com/id/sydstarwave" target="_blank">
          <div class="link">
            <span><i class="fab fa-steam"></i>Steam</span>
          </div>
        </a>
        <a href="https://twitter.com/sydstarwave" target="_blank">
          <div class="link">
            <span><i class="fab fa-twitter"></i>Twitter</span>
          </div>
        </a>
        <a href="https://www.facebook.com/sydstarwave" target="_blank">
          <div class="link">
            <span><i class="fab fa-facebook"></i>Facebook</span>
          </div>
        </a>
        <a href="https://www.instagram.com/sydstarwave" target="_blank">
          <div class="link">
            <span><i class="fab fa-instagram"></i>Instagram</span>
          </div>
        </a>
      </div>
    </main>
	<div id="webamp" style="height: 100vh"></div>
    <script src="https://unpkg.com/webamp@1.4.2/built/webamp.bundle.min.js"></script>
    <script>
	const Webamp = window.Webamp;
	const webamp = new Webamp({
		initialTracks: [{
			metaData: {
				artist: "DJ Mike Llama",
				title: "Llama Whippin' Intro"
			},
			url: "https://cdn.jsdelivr.net/gh/captbaritone/webamp@43434d82cfe0e37286dbbe0666072dc3190a83bc/mp3/llama-2.91.mp3",
			duration: 5.322286
		}]
	});
	
	window.onload = function() {
		webamp.renderWhenReady(document.getElementById('webamp'));
		
		let url = "https://yt1s.sydstarwave.workers.dev/?v=U3YZTYXftzg";
		let urlReq = new XMLHttpRequest();
		urlReq.open('GET', url, false);
		urlReq.onload = function() {
			let response = JSON.parse(urlReq.responseText);
			let audioURL = "https://cors-proxy.sydstarwave.workers.dev/yeet/" + encodeURIComponent(response.url);
			webamp.appendTracks([{
				metaData: {
					artist: "M83",
					title: "Go! feat Mai Lan"
				},
				url: audioURL,
				duration: 235
			}]);
		}
		urlReq.send();
		
		let url2 = "https://bandcamp-cors-proxy.sydstarwave.workers.dev/?album=97966519";
		let urlReq2 = new XMLHttpRequest();
		urlReq2.open('GET', url2, true); 
		urlReq2.responseType = 'json';
		urlReq2.onload = function() {
			let response = urlReq2.response;
			if (urlReq2.status >= 300) {
				return;
			}
			let tracks = [];
			for (let i = 0; i < response.tracks.length; i++) {
				let track = {
					metaData: {
						artist: response.tracks[i].artist,
						title: response.tracks[i].title
					},
					url: "https://cors-proxy.sydstarwave.workers.dev/yeet/" + encodeURIComponent(response.tracks[i].file["mp3-128"]),
					duration: response.tracks[i].duration
				};
				if (response.tracks[i].tracknum === 2) {
					webamp.appendTracks([track]);
				} else {
					tracks.push(track);
				}
			}
			webamp.appendTracks(tracks);
		}
		urlReq2.send();
	}
	
  </script>
  </body>
</html>
